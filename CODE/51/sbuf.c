#ifndef __STC15_H__
#define __STC15_H__
#include <reg52.h>
#include <absacc.h>
#define uint unsigned int //??typedef unsigned int uint;
#define uchar unsigned char
uchar date;
uchar recFlag; //??????,0 ????? 1 ????
void init_serial();
void send();
void receive();
main()
{
init_serial();
IE=0; //????
while(1)
{
receive(); send();
}
}
void init_serial() //?????
{
TMOD=0x20; //???T1??????2
TL1=250; //????
TH1=250;
TR1=1; //????
PCON=0x80; //SMOD=1;
SCON=0x50; //????1,???9600bit/s,????
TI=1;
}
void send()
{
if(TI==1) //??????READY
{
if(recFlag==1) //???????
{
SBUF=date; //????
recFlag=0;
TI=0;
}
}
}
void receive()
{
if(RI==1) //?????????
{
date=SBUF; //????
recFlag=1; //???????
RI=0;
}
}